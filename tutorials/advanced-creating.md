---
layout: tutorials
title: Продвинутое создание узлов
---

## Создание узлов с функционалом  

Главное отличие узлов с функционалом и функций в том, что первые выполняются внутри одного узла, а функции 
выполняются соответственно описанной подпрограммы из узлов внутри. Если поиск максимума в функции может 
занимать 30 операций для  сравнения трех чисел, то поиск максимума в запрограммированном узле может 
выполнятся за 1 операцию.

### Какие знания требуются

Первоначально требуется знание Python и того, как работает в нем ООП. Если есть знание объектно-ориентированного 
программирования (независимого от языка), то второй пункт можно опустить. Если ООП вовсе не известно, но хочется 
создавать узлы самому, то тогда требуется понимание того, как каждый узел взаимодействует с окружением и что для этого
нужно (какие функции, переменные и т.п.).

##

Общие переменные для всех узлов: 

- **variables** - <список всех переменные>
- **struct_variables** - <список всех структурных переменных>
- **nodes** - <список всех узлов>

Базовые методы класса узла:

- **__init__(self, data)** - создание экземпляра класса (узла)
- **get_actual_state(self)** - получение реального состояния
- **__del__(self)** - удаление узла
- **update_connections(self)** - обновление соединений
- **set_state(self, state, input_index, \*\*kwargs)** - изменение состояния узла
- **update(self, state)** - обновление узла

Часто используемые базовые методы класса узла при написании функционала:

- **get_actual_input(self, input_index)** - получение входного номера коннектора по номеру подключения
- **get_actual_output(self, output_index)** - получение выходного номера коннектора по номеру подключения
- **get_value(self, input_index, mult=False)** - получение значения из узла по указанному индексу
- **set_active(self, output_index)** - активация следующих узлов
- **update_active(self)** - обновление узла в активном состоянии
- **update_waiting(self)** - обновление узла в ожидании
- **update_inactive(self)** - обновление узла в деактивированном состоянии

Атрибуты класса используемые в вычислениях:

- **id** - идентификатор узла на диаграмме
- **raw_data** - необработанная информацию об узле
- **name** - имя узла
- **desc_value** - описание узла на диаграмме
- **inputs** - список узлов подключенных ко входам
- **outputs** - список узлов подключенных к выходам
- **input_values** - список значений входов
- **output_values** - список значений выходов
- **input_connectors** - список входов
- **output_connectors** - список выходов
- **actual_inputs** - словарь соответствий входов и коннекторов
- **actual_outputs** - словарь соответствий выходов и коннекторов
- **state** - состояние
- **sub_state** - дополнительное состояние
- **scope** - область видимости
- **pos** - позиция на диаграмме
- **size** - размер в диаграмме

# В процессе написания ✍(◔◡◔)

[index]: {{site.baseurl}}/index
[tutorials]: {{site.baseurl}}/tutorials#content
[drawio]: https://app.diagrams.net/?splash=0&libs=0&clibs=Uhttps://raw.githubusercontent.com/octo-gone/sync-execution/master/resources/base.drawio;Uhttps://raw.githubusercontent.com/octo-gone/sync-execution/master/resources/structure.drawio
[replit]: https://repl.it/github/octo-gone/sync-execution